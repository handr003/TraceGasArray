# TraceGasArray: Calculation and integration of trace gas fluxes and soil climate data for high-res in situ chamber array
### Holly M. Andrews and Alex Krichels

*Purpose:* The purpose of the TraceGasArray script is to calculate instantaneous trace gas fluxes from raw concentration values collected in situ, and to integrate these fluxes with instantaneous soil climate parameters collected in tandem. This code has been optimized for the trace gas array used by the Jenerette and Homyak labs at the University of California Riverside (UCR) to calculate fluxes of CO2, N2O, CO, and NO, but may be customized for different combinations of/additional trace gases (e.g. CH4, NH3) that are measured in ppm/ppb. Our array consists of the following analyzers, with concentration units and measurement frequency included in parentheses: (1) Licor 8100 (ppm, 1s); (2) LGR N2O/CO analyzer (ppm, 1s); and (3) 2B Technologies NO monitor connected to external Campbell Scientific CR-1000 datalogger (ppb, 10s). Analyzers are multiplexed to a network of eight automated Licor field chambers with 5-cm depth soil temperature and moisture probes; each chamber is active for a 2.5-minute measurement period followed by 30-second cooldown. For simplicity of analysis, we program a 30 minute cycle among the eight chambers (24 minute measurement + 6 minute standby). Therefore, each chamber produces measurements every ~30 minutes. Importantly, chamber information is only collected and stored in the Licor 8100; because these continuous, high-resolution datasets produce tens of thousands of points, our script extracts info related to measurement time and chamber number from 8100 data and uses it to clip all gas and climate data to only periods of time when measurements were taking place. Then, we calculate individual fluxes of each gas as the slope of the linear increase in concentration during the measurement period (usually we use a 90-second window within the 2.5 minute measurement). Finally, we integrate all gas fluxes and soil climate data into one data frame and extrapolate to widely-used flux units (grams per meter per second) using the Ideal Gas Law. The resulting data set can then be funneled into additional analyses and data visualization pipelines.
